(this["webpackJsonpreact-simple-bank"]=this["webpackJsonpreact-simple-bank"]||[]).push([[0],{182:function(e,t,n){e.exports=n(461)},188:function(e,t,n){},189:function(e,t,n){},202:function(e,t){},210:function(e,t){},227:function(e,t){},229:function(e,t){},244:function(e,t){},246:function(e,t){},394:function(e,t){},405:function(e,t){},408:function(e,t){},461:function(e,t,n){"use strict";n.r(t);var a,r,i,o,s,u,c,l,p,d=n(1),m=n.n(d),b=n(179),f=n.n(b),y=(n(187),n(188),n(189),n(9)),w=n.n(y),v=n(15),h=n(180),g=n.n(h),x=n(28),O=n(4),j=n(29),E=(n(460),n(20)),k=new(a=function e(){Object(O.a)(this,e),Object(x.a)(this,"contractAddress",r,this),Object(x.a)(this,"updateContractAddress",i,this),Object(x.a)(this,"netId",o,this),Object(x.a)(this,"netName",s,this),Object(x.a)(this,"netWarning",u,this),Object(x.a)(this,"updateNetId",c,this),Object(x.a)(this,"web3",l,this),Object(x.a)(this,"updateWeb3",p,this)},r=Object(j.a)(a.prototype,"contractAddress",[E.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return localStorage&&localStorage.getItem("voting_react_contractAddress")||void 0}}),i=Object(j.a)(a.prototype,"updateContractAddress",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.contractAddress=t,t?localStorage.setItem("voting_react_contractAddress",t):localStorage.removeItem("voting_react_contractAddress")}}}),o=Object(j.a)(a.prototype,"netId",[E.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=Object(j.a)(a.prototype,"netName",[E.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=Object(j.a)(a.prototype,"netWarning",[E.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=Object(j.a)(a.prototype,"updateNetId",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.netId=t;var n=function(e){var t,n=null;switch(e){case 1:t="Mainnet",n="please switch your network to Kovan or Thai Chain";break;case 2:t="Deprecated Morden",n="please switch your network to Kovan or Thai Chain";break;case 3:t="Ropsten",n="please switch your network to Kovan or Thai Chain";break;case 4:t="Rinkeby";break;case 42:t="Kovan";break;case 5777:t="Ganache";break;default:t="Unknown",n="please switch your network to Kovan or Thai Chain"}return{network:t,warning:n}}(t);console.log("Store -> updateNetId -> networkData",n),e.netName=null===n||void 0===n?void 0:n.network,e.netWarning=null===n||void 0===n?void 0:n.warning}}}),l=Object(j.a)(a.prototype,"web3",[E.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=Object(j.a)(a.prototype,"updateWeb3",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.web3=t}}}),a),N=n(463),T=n(13),A=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],M=function(){var e=k.web3,t="0x60bf3AF1Ea6653A0779E4738319Ea0981CEA802a";return Object(d.useMemo)((function(){if(!e)return null;try{return new e.eth.Contract(A,t)}catch(n){return console.warn(n),null}}),[e,t])},C=function(){var e=k.web3,t=Object(d.useState)([]),n=Object(T.a)(t,2),a=n[0],r=n[1],i=Object(d.useState)(),o=Object(T.a)(i,2),s=o[0],u=o[1],c=Object(d.useState)(),l=Object(T.a)(c,2),p=l[0],m=l[1],b=M(),f=Object(d.useCallback)(Object(v.a)(w.a.mark((function t(){var n,a,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&b){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.eth.getAccounts();case 4:if(n=t.sent,r(n),!(a=n[0])){t.next=13;break}return u(a),t.next=11,b.methods.balanceOf(a).call();case 11:i=t.sent,m(e.utils.fromWei(i));case 13:case"end":return t.stop()}}),t)}))),[e,b]);return Object(d.useEffect)((function(){f()}),[f]),{accounts:a,myAccount:s,balance:p}},S=Object(N.a)((function(){var e=C(),t=e.myAccount,n=e.balance;return m.a.createElement("div",{className:"w-full",style:{wordBreak:"break-all"}},m.a.createElement("p",{className:"text-lg flex flex-col mb-2"},m.a.createElement("span",{className:"text-sm font-bold"},"Account"),m.a.createElement("span",null,t)),m.a.createElement("p",{className:"text-lg flex flex-col"},m.a.createElement("span",{className:"text-sm font-bold"},"Balance"),m.a.createElement("span",null,n," SIM")))})),I=Object(N.a)((function(){return function(){var e=k.web3,t=Object(d.useCallback)(Object(v.a)(w.a.mark((function t(){var n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,e.eth.net.getId();case 3:n=t.sent,console.log("triggerNetId -> netId",n),k.updateNetId(n);case 6:case"end":return t.stop()}}),t)}))),[e]);Object(d.useEffect)((function(){t()}),[t])}(),m.a.createElement("div",{className:"w-full"},m.a.createElement("p",{className:"text-lg flex flex-col"},m.a.createElement("span",{className:"font-bold text-sm"},"Network"),k.netId?m.a.createElement("span",null,k.netName):m.a.createElement("span",null,"Loading network...")))})),W=function(e){var t=e.isAddress;return m.a.createElement(m.a.Fragment,null,m.a.createElement("header",{className:"px-16 py-12 bg-gradient-to-r from-red-400 to-blue-500 ".concat(t?"":"min-h-screen flex items-center justify-center")},m.a.createElement("div",{className:"grid grid-cols-2 gap-6 w-full max-w-5xl mx-auto"},m.a.createElement("div",{className:"".concat("bg-white p-6 rounded-lg shadow-lg flex items-center justify-center"," flex-col")},m.a.createElement("div",{className:"mb-2 w-full"},m.a.createElement(I,null)),m.a.createElement(S,null)))))},B=function(){return m.a.createElement("footer",{className:"px-16 py-4 text-gray-100 flex justify-center text-sm"},"Simple Voting Ethereum Workshop (React Edition)")},z=[{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"deposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"increaseYear",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"accountAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"DepositMade",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[{internalType:"uint256",name:"withdrawAmount",type:"uint256"}],name:"withdraw",outputs:[{internalType:"uint256",name:"remainingBal",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"systemBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],_=function(){var e=k.web3,t=k.contractAddress;return Object(d.useMemo)((function(){if(!e)return null;try{return new e.eth.Contract(z,t)}catch(n){return console.warn(n),null}}),[e,t])},D=Object(N.a)((function(){var e=function(){var e=k.web3,t=Object(d.useState)(0),n=Object(T.a)(t,2),a=n[0],r=n[1],i=_(),o=C().myAccount,s=Object(d.useCallback)(Object(v.a)(w.a.mark((function t(){var n,a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&i&&o){t.next=2;break}return t.abrupt("return");case 2:return n={from:o},t.next=5,i.methods.balance().call(n);case 5:a=t.sent,r(Number(e.utils.fromWei(a)));case 7:case"end":return t.stop()}}),t)}))),[e,i,o]);return Object(d.useEffect)((function(){s()}),[s]),{balance:a,fetch:s}}().balance,t=function(){var e=k.web3,t=Object(d.useState)(0),n=Object(T.a)(t,2),a=n[0],r=n[1],i=_(),o=Object(d.useCallback)(Object(v.a)(w.a.mark((function t(){var n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&i){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,i.methods.systemBalance().call();case 4:n=t.sent,r(Number(e.utils.fromWei(n)));case 6:case"end":return t.stop()}}),t)}))),[e,i]);return Object(d.useEffect)((function(){o()}),[o]),{systemBalance:a,fetch:o}}().systemBalance,n=function(){var e=k.web3,t=k.contractAddress,n=M(),a=C().myAccount,r=Object(d.useState)(!1),i=Object(T.a)(r,2),o=i[0],s=i[1];return{approve:Object(d.useCallback)(function(){var r=Object(v.a)(w.a.mark((function r(i,o){var u,c,l,p;return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n&&a&&t){r.next=2;break}return r.abrupt("return");case 2:if(e){r.next=4;break}return r.abrupt("return");case 4:u=e.utils.toWei(i),c={from:a},s(!0),l=!1,p=!1,n.methods.approve(t,u).send(c).on("error",(function(e){s(!1),p||(console.error(e),p=!0)})).on("confirmation",(function(e,t){console.log("confirmationNumber",e),console.log(t),s(!1),l||(o&&o(),l=!0)}));case 10:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),[e,n,a,t]),loading:o}}().approve,a=function(){var e=k.web3,t=_(),n=C().myAccount,a=Object(d.useState)(!1),r=Object(T.a)(a,2),i=r[0],o=r[1];return{deposit:Object(d.useCallback)(function(){var a=Object(v.a)(w.a.mark((function a(r,i){var s,u,c,l;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t&&n){a.next=2;break}return a.abrupt("return");case 2:if(e){a.next=4;break}return a.abrupt("return");case 4:s=e.utils.toWei(r),u={from:n},o(!0),c=!1,l=!1,t.methods.deposit(s).send(u).on("error",(function(e){o(!1),l||(console.error(e),l=!0)})).on("confirmation",(function(e,t){console.log("confirmationNumber",e),console.log(t),o(!1),c||(i&&i(),c=!0)}));case 10:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[e,t,n]),loading:i}}().deposit,r=function(){var e=k.web3,t=_(),n=C().myAccount,a=Object(d.useState)(!1),r=Object(T.a)(a,2),i=r[0],o=r[1];return{withdraw:Object(d.useCallback)(function(){var a=Object(v.a)(w.a.mark((function a(r,i){var s,u,c,l;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t&&n){a.next=2;break}return a.abrupt("return");case 2:if(e){a.next=4;break}return a.abrupt("return");case 4:s=e.utils.toWei(r),u={from:n},o(!0),c=!1,l=!1,t.methods.withdraw(s).send(u).on("error",(function(e){o(!1),l||(console.error(e),l=!0)})).on("confirmation",(function(e,t){console.log("confirmationNumber",e),console.log(t),o(!1),c||(i&&i(),c=!0)}));case 10:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[e,t,n]),loading:i}}().withdraw,i=function(){var e=_(),t=C().myAccount,n=Object(d.useState)(!1),a=Object(T.a)(n,2),r=a[0],i=a[1];return{increaseYear:Object(d.useCallback)(function(){var n=Object(v.a)(w.a.mark((function n(a){var r,o,s;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t){n.next=2;break}return n.abrupt("return");case 2:r={from:t},i(!0),o=!1,s=!1,e.methods.increaseYear().send(r).on("error",(function(e){i(!1),s||(console.error(e),s=!0)})).on("confirmation",(function(e,t){console.log("confirmationNumber",e),console.log(t),i(!1),o||(a&&(window.location.reload(),a()),o=!0)}));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t]),loading:r}}().increaseYear,o=Object(d.useState)("0"),s=Object(T.a)(o,2),u=s[0],c=s[1],l=Object(d.useState)("0"),p=Object(T.a)(l,2),b=p[0],f=p[1];return m.a.createElement("div",{className:"bg-gradient-to-b from-indigo-900 to-indigo-800 py-12 px-10"},m.a.createElement("div",{className:"max-w-5xl mx-auto"},m.a.createElement("div",{className:"flex justify-between mb-4"},m.a.createElement("div",{className:"text-3xl text-white font-bold"},"Simple Bank"),m.a.createElement("div",{className:"bg-blue-500 px-6 py-2 cursor-pointer rounded-lg text-lg font-bold",onClick:function(){return i()}},"Increase Year")),m.a.createElement("div",{className:"grid grid-cols-2 gap-6 mb-6"},m.a.createElement("div",{className:"bg-white p-4 shadow-lg rounded-lg"},m.a.createElement("div",{className:"font-bold"},"Balance"),m.a.createElement("div",{className:"text-2xl"},e)),m.a.createElement("div",{className:"bg-white p-4 shadow-lg rounded-lg"},m.a.createElement("div",{className:"font-bold"},"System Balance"),m.a.createElement("div",{className:"text-2xl"},t))),m.a.createElement("div",{className:"grid grid-cols-2 gap-6"},m.a.createElement("div",{className:"bg-white rounded-lg shadow-2xl overflow-hidden"},m.a.createElement("div",{className:"p-4 bg-blue-100 font-bold text-xl"},"Deposit"),m.a.createElement("div",{className:"p-6"},m.a.createElement("input",{value:u,onChange:function(e){return c(e.target.value)},placeholder:"0.00",className:"text-lg border border-gray-400 w-full p-3 mb-3"}),m.a.createElement("button",{className:"p-3 bg-blue-700 text-white px-6 mr-4",onClick:function(){return n(u,(function(){}))}},"Approve"),m.a.createElement("button",{className:"p-3 bg-blue-700 text-white px-6",onClick:function(){return a(u,(function(){return c("0")}))}},"Deposit"))),m.a.createElement("div",{className:"bg-white rounded-lg shadow-2xl overflow-hidden"},m.a.createElement("div",{className:"p-4 bg-blue-100 font-bold text-xl"},"Withdraw"),m.a.createElement("div",{className:"p-6"},m.a.createElement("input",{value:b,onChange:function(e){return f(e.target.value)},placeholder:"0.00",className:"text-lg border border-gray-400 w-full p-3 mb-3"}),m.a.createElement("button",{className:"p-3 bg-blue-700 text-white px-6",onClick:function(){return r(b,(function(){return f("0")}))}},"Withdraw"))))))})),F=Object(N.a)((function(){var e=!!k.web3;return function(){var e=Object(d.useCallback)(Object(v.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=14;break}return t=new g.a(window.ethereum),e.prev=2,e.next=5,window.ethereum.enable();case 5:n=e.sent,console.log("result",n),k.updateWeb3(t),k.updateContractAddress("0x2E75F1C09C7327C64607095B21940a950FefB741"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])}))),[]);Object(d.useEffect)((function(){e()}),[e]),k.web3}(),m.a.createElement("div",null,m.a.createElement(W,{isAddress:e}),e&&m.a.createElement(D,null),m.a.createElement(B,null))}));f.a.render(m.a.createElement(m.a.StrictMode,null,m.a.createElement(F,null)),document.getElementById("root"))}},[[182,1,2]]]);
//# sourceMappingURL=main.2b982681.chunk.js.map